version: '3.8'

services:
  heating-controller: 
    image: ghcr.io/kaninfod/heating_controller:latest  # Replace with your repo name
    container_name: heating-controller
    restart: unless-stopped
    
    ports:
      - "8321:8321"
    
    environment:
      - PYTHONUNBUFFERED=1
      - ENVIRONMENT=production  # Set your environment
    
    # Mount only config/data, not source code
    volumes: 
      - /home/pi/heating_controller/config:/app/config
      - /home/pi/heating_controller/data:/app/data
    
    networks:
      - unified_network
    
    logging:
      driver: syslog
      options:
        syslog-address: "udp://192.168.68.102:514"
        tag: "HEATING"
        syslog-facility: "daemon"
        syslog-format: "rfc5424"

networks:
  unified_network:
    external:  true
